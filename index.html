<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>clouN Prod</title>
    <script src="https://www.youtube.com/iframe_api"></script>
    <style>
        /* Les styles CSS restent inchangés pour cet exemple */
        #mosaic {
            display: flex;
            transition: transform 0.5s ease;
        }
        #hero {
            transition: opacity 0.3s ease;
        }
        .video-section {
            display: none;
        }
        .video-section.active {
            display: block;
        }
        .arrow {
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div id="hero">
        <div id="mosaic">
            <!-- Contenu de la mosaïque (exemple) -->
            <div class="project" onclick="showVideo(1)">Projet 1</div>
            <div class="project" onclick="showVideo(2)">Projet 2</div>
            <div class="project" onclick="showVideo(3)">Projet 3</div>
        </div>
        <div class="arrow" onclick="prevColumn()">←</div>
        <div class="arrow" onclick="nextColumn()">→</div>
    </div>
    <div id="video-section" class="video-section">
        <div id="video-content"></div>
        <div id="related-videos"></div>
        <button onclick="closeVideoAndReturnToMosaic()">Fermer</button>
    </div>
    <nav>
        <ul>
            <li><a href="#" onclick="showSection('narration')">Narration</a></li>
            <li><a href="#" onclick="showSection('publicite')">Publicité</a></li>
            <li><a href="#" onclick="showSection('musique-video')">Musique-Vidéo</a></li>
        </ul>
    </nav>
    <div id="narration-section" class="section"><button onclick="hideSection('narration')">Retour</button></div>
    <div id="publicite-section" class="section"><button onclick="hideSection('publicite')">Retour</button></div>
    <div id="musique-video-section" class="section"><button onclick="hideSection('musique-video')">Retour</button></div>

    <script>
        let savedMosaicTransform = ''; // Variable pour sauvegarder l'état de la mosaïque

        function showVideo(projectId) {
            const videoSection = document.getElementById('video-section');
            const videoContent = document.getElementById('video-content');
            const relatedVideos = document.getElementById('related-videos');
            const mosaic = document.getElementById('mosaic');

            // Sauvegarder la transformation actuelle de la mosaïque
            savedMosaicTransform = mosaic.style.transform || 'translateX(0vw)';

            // Exemple de contenu vidéo
            videoContent.innerHTML = `
                <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ?enablejsapi=1" frameborder="0" allowfullscreen></iframe>
                <h2>Projet ${projectId}</h2>
            `;
            relatedVideos.innerHTML = `
                <div onclick="playRelatedVideo('dQw4w9WgXcQ')">Vidéo connexe 1</div>
            `;

            videoSection.classList.add('active');
            const hero = document.getElementById('hero');
            hero.style.opacity = '0';
            hero.style.pointerEvents = 'none';
        }

        function closeVideoAndReturnToMosaic() {
            const videoSection = document.getElementById('video-section');
            videoSection.classList.remove('active');
            document.getElementById('video-content').innerHTML = '';
            document.getElementById('related-videos').innerHTML = '';
            const hero = document.getElementById('hero');
            hero.style.opacity = '1';
            hero.style.pointerEvents = 'auto';
            const mosaic = document.getElementById('mosaic');
            mosaic.style.transform = savedMosaicTransform; // Restaurer l'état sauvegardé
            window.scrollTo({ top: 0, behavior: 'smooth' });
            rebindArrowEvents();
        }

        function playRelatedVideo(videoId) {
            const videoContent = document.getElementById('video-content');
            videoContent.innerHTML = `
                <iframe src="https://www.youtube.com/embed/${videoId}?enablejsapi=1" frameborder="0" allowfullscreen></iframe>
            `;
        }

        function showSection(sectionId) {
            const section = document.getElementById(sectionId + '-section');
            section.classList.add('active');
            const hero = document.getElementById('hero');
            hero.style.opacity = '0';
            hero.style.pointerEvents = 'none';
            const mosaic = document.getElementById('mosaic');
            savedMosaicTransform = mosaic.style.transform || 'translateX(0vw)'; // Sauvegarder avant de masquer
        }

        function hideSection(sectionId) {
            const section = document.getElementById(sectionId + '-section');
            section.classList.remove('active');
            const hero = document.getElementById('hero');
            hero.style.opacity = '1';
            hero.style.pointerEvents = 'auto';
            const mosaic = document.getElementById('mosaic');
            mosaic.style.transform = savedMosaicTransform; // Restaurer l'état sauvegardé
            window.scrollTo({ top: 0, behavior: 'smooth' });
            rebindArrowEvents();
        }

        function nextColumn() {
            const mosaic = document.getElementById('mosaic');
            let translateX = parseInt(mosaic.style.transform.replace(/translateX\(-(\d+)vw\)/, '$1') || 0);
            if (translateX < 200) translateX += 100; // Limite arbitraire à 200vw
            mosaic.style.transform = `translateX(-${translateX}vw)`;
            savedMosaicTransform = mosaic.style.transform; // Mettre à jour l'état sauvegardé
        }

        function prevColumn() {
            const mosaic = document.getElementById('mosaic');
            let translateX = parseInt(mosaic.style.transform.replace(/translateX\(-(\d+)vw\)/, '$1') || 0);
            if (translateX > 0) translateX -= 100;
            mosaic.style.transform = `translateX(-${translateX}vw)`;
            savedMosaicTransform = mosaic.style.transform; // Mettre à jour l'état sauvegardé
        }

        function rebindArrowEvents() {
            const arrows = document.querySelectorAll('.arrow');
            arrows.forEach(arrow => {
                arrow.style.display = 'block';
                arrow.style.pointerEvents = 'auto';
                const action = arrow.getAttribute('onclick');
                if (action === 'nextColumn()') {
                    arrow.onclick = nextColumn;
                } else if (action === 'prevColumn()') {
                    arrow.onclick = prevColumn;
                }
            });
        }
    </script>
</body>
</html>
